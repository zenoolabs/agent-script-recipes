# PromptTemplateActions
# Demonstrates how to invoke Salesforce Prompt Templates as actions

config:
   agent_name: "PromptTemplateActions"
   agent_label: "PromptTemplateActions"
   description: "Invokes prompt templates for generating content"

variables:
   contact_id: mutable string = "003..."
   generated_schedule: mutable string = ""

system:
   messages:
      welcome: "Hi! I can generate personalized schedules using Prompt Templates."
      error: "Something went wrong."

   instructions: "You are an assistant that uses GenAI Prompt Templates to generate content."

start_agent topic_selector:
   description: "Start topic"
   
   reasoning:
      instructions:|
         Select the tool that best matches the user's message and conversation history. If it's unclear, make your best guess.
      actions:
         generate_schedule: @utils.transition to @topic.schedule_generation
            description: "Go to schedule generation"

topic schedule_generation:
   description: "Generates personalized schedule"

   actions:
      # Action targeting a Prompt Template
      generate_personalized_schedule:
         description: "Generates a schedule based on guest interests"
         inputs:
            contactId: string
               description: "The Contact ID of the guest"
         outputs:
            promptResponse: string
               description: "The generated schedule"
         target: "prompt://Generate_Personalized_Schedule"

   reasoning:
      instructions:->
         | I will generate a schedule for you.
         
         run @actions.generate_personalized_schedule
            with contactId=@variables.contact_id
            set @variables.generated_schedule = @outputs.promptResponse
            
         | Here is your schedule:
           {!@variables.generated_schedule}

      actions:
         generate_schedule_action: @actions.generate_personalized_schedule
            with contactId=@variables.contact_id
            set @variables.generated_schedule = @outputs.promptResponse

